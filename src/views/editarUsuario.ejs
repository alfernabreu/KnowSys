<%- include('includes/head') %>
<%- include('includes/nav') %>
<%- include('includes/botaoVoltar') %>


<div class="container">
  <div class="row">
    <div class="col-lg-2"></div>

    <div class="col-lg-8 my-3">
      <h1 class="text-center">Usuários</h1>
      <p class="text-center lead">Crie ou edite os usuário abaixo.</p>

      <%- include('includes/messages') %>

      <% if(usuario._id) { %>
      <form action="/editarUsuario/edit/<%= usuario._id %>" id="formulario-criarUsuario" method="POST">
      <% } else { %>
      <form action="/cadastro/register" method="POST" id="formulario-criarUsuario">
      <% } %>
        <input type="hidden" name="_csrf" value=<%= csrfToken %>>
        <input type="hidden" name="tipoUsuario" value="usuario">
        <input type="hidden" name="inputNomeEmpresa" value=<%= user.inputNomeEmpresa %>>
        <input type="hidden" name="inputCnpjEmpresa" value=<%= user.inputCnpjEmpresa %>>
        <input type="hidden" name="inputEmailEmpresa" value=<%= user.inputEmailEmpresa %>>
        <div class="form-group">
          <label>Nome</label>
          <input value="<%= usuario.inputNome %>" type="text" class="form-control" name="inputNome">
        </div>
        <div class="form-group">
          <label>Matrícula</label>
          <input value="<%= usuario.inputMatricula %>" type="text" class="form-control" name="inputMatricula">
        </div>
        <div class="form-group">
          <label>Email</label>
          <input value="<%= usuario.email %>" type="email" class="form-control" name="email">
        </div>
        <div class="form-group">
          <label>Senha</label>
          <input value="<%= usuario.password%>" type="password" class="form-control" name="password">
        </div>
        <div class="form-group">
          <label>Confirme a senha</label>
          <input value="<%= usuario.senha %>" type="password" class="form-control" name="inputConfirmacaoSenhaModerador">
        </div>
        <div class="d-flex justify-content-end">
          <button  class="btn btn-success g-3 m-2 confirmar-cadastro" data-toggle="modal"
        data-target="#exampleModalCenter" id="photoBtn" type="button"
          ><svg xmlns="http://www.w3.org/2000/svg"
              width="16" height="16" fill="currentColor" class="bi bi-check-lg" viewBox="0 0 16 16">
              <path
                d="M12.736 3.97a.733.733 0 0 1 1.047 0c.286.289.29.756.01 1.05L7.88 12.01a.733.733 0 0 1-1.065.02L3.217 8.384a.757.757 0 0 1 0-1.06.733.733 0 0 1 1.047 0l3.052 3.093 5.4-6.425a.247.247 0 0 1 .02-.022Z" />
            </svg> Salvar</button>
          <button type="submit" class="btn btn-danger g-3 m-2" action="/home/index"><svg
              xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
              class="bi bi-x" viewBox="0 0 16 16">
              <path
                d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z" />
            </svg> Cancelar</button>
        </div>
      </form>
    </div>    
    <div class="col-lg-2"></div>
  </div>
</div>


<!-- Modal -->
<div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle"
  aria-hidden="true" data-backdrop="static">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Confirmação</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <p>Deseja realmente criar o usuário?</p>
      </div>
      <div class="modal-footer">
        <button id="btnSalvarModal1" type="button" class="btn btn-primary">Salvar</button>
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancelar</button>
      </div>
    </div>
  </div>
</div>
  

<script type="text/javascript">
  document.getElementById('btnSalvarModal1').addEventListener('click', function(event) {
    event.preventDefault(); // Impede o envio do formulário

    // Enviar os dados do formulário para o servidor
    document.getElementById('formulario-criarUsuario').submit();
  });
</script>

<%- include('includes/footer') %>
